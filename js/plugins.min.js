function RichMarker(a){var b=a||{};this.ready_=!1,this.dragging_=!1,void 0==a.visible&&(a.visible=!0),void 0==a.shadow&&(a.shadow="7px -3px 5px rgba(88,88,88,0.7)"),void 0==a.anchor&&(a.anchor=RichMarkerPosition.BOTTOM),this.setValues(b)}!function(a,b){"use strict";function c(b,c,d){b._eventHandlers=b._eventHandlers||[{element:b.scroller,handler:function(a){b.scroll(a)},type:"scroll"},{element:b.root,handler:function(){b.update()},type:"transitionend animationend"},{element:b.scroller,handler:function(){b.update()},type:"keyup"},{element:b.bar,handler:function(a){a.preventDefault(),b.selection(),b.drag.now=1},type:"touchstart mousedown"},{element:document,handler:function(){b.selection(1),b.drag.now=0},type:"mouseup blur touchend"},{element:document,handler:function(a){2!=a.button&&b._pos0(a)},type:"touchstart mousedown"},{element:document,handler:function(a){b.drag.now&&b.drag(a)},type:"mousemove touchmove"},{element:a,handler:function(){b.update()},type:"resize"},{element:b.root,handler:function(){b.update()},type:"sizeChange"}],l(b._eventHandlers,function(a){a.element&&c(a.element,a.type,a.handler,d)})}function d(a,b,c){var d="data-baron-"+b;if("on"==c)a.setAttribute(d,"inited");else{if("off"!=c)return a.getAttribute(d);a.removeAttribute(d)}}function e(a){if(d(a.root,a.direction))throw new Error("Second baron initialization");var b=new n.prototype.constructor(a);return c(b,a.event,"on"),d(b.root,a.direction,"on"),b.update({initMode:!0}),b}function f(a){var b={};a=a||{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function g(a){var b=f(a);b.direction=b.direction||"v";var c=a.event||function(a,c,d,e){b.$(a)[e||"on"](c,d)};return b.event=function(a,b,d,e){l(a,function(a){c(a,b,d,e)})},b}function h(a){if(this.events&&this.events[a])for(var b=0;b<this.events[a].length;b++){var c=Array.prototype.slice.call(arguments,1);this.events[a][b].apply(this,c)}}if(a){var i=m,j=["left","top","right","bottom","width","height"],k={v:{x:"Y",pos:j[1],oppos:j[3],crossPos:j[0],crossOpPos:j[2],size:j[5],crossSize:j[4],client:"clientHeight",crossClient:"clientWidth",crossScroll:"scrollWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:j[0],oppos:j[2],crossPos:j[1],crossOpPos:j[3],size:j[4],crossSize:j[5],client:"clientWidth",crossClient:"clientHeight",crossScroll:"scrollHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},l=function(c,d){var e=0;for((c.length===b||c===a)&&(c=[c]);c[e];)d.call(this,c[e],e),e++},m=function(b){var c,d,e;return b=b||{},e=b.$||a.jQuery,c=this instanceof e,c?b.root=d=this:d=e(b.root||b.scroller),new m.fn.constructor(d,b,e).autoUpdate()};m.fn={constructor:function(a,b,c){var d=g(b);d.$=c,l.call(this,a,function(a,b){var c=f(d);d.root&&d.scroller?(c.scroller=d.$(d.scroller,a),c.scroller.length||(c.scroller=a)):c.scroller=a,c.root=a,this[b]=e(c),this.length=b+1}),this.params=d},dispose:function(){var a=this.params;this[0]&&l(this,function(b){b.dispose(a)}),this.params=null},update:function(){for(var a=0;this[a];)this[a].update.apply(this[a],arguments),a++},baron:function(a){return a.root=[],a.scroller=this.params.scroller,l.call(this,this,function(b){a.root.push(b.root)}),a.direction="v"==this.params.direction?"h":"v",a._chain=!0,m(a)}};var n={};n.prototype={constructor:function(a){function c(a,b){return l(a,b)[0]}function d(a){var b=this.barMinSize||20;a>0&&b>a&&(a=b),this.bar&&l(this.bar).css(this.origin.size,parseInt(a,10)+"px")}function e(a){this.bar&&l(this.bar).css(this.origin.pos,+a+"px")}function f(){return o[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function g(a){return a*f.call(this)+this.barTopLimit}function i(a){return(a-this.barTopLimit)/f.call(this)}function j(){return!1}var l,m,n,o,p,q,r,s,t,u,v;return u=t=(new Date).getTime(),l=this.$=a.$,this.event=a.event,this.events={},this.root=a.root,this.scroller=c(a.scroller),this.bar=c(a.bar,this.root),o=this.track=c(a.track,this.root),!this.track&&this.bar&&(o=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=a.direction,this.origin=k[this.direction],this.barOnCls=a.barOnCls,this.scrollingCls=a.scrollingCls,this.barTopLimit=0,s=1e3*a.pause||0,this.cursor=function(a){return a["client"+this.origin.x]||(((a.originalEvent||a).touches||{})[0]||{})["page"+this.origin.x]},this.pos=function(a){var c="page"+this.origin.x+"Offset",d=this.scroller[c]?c:this.origin.scroll;return a!==b&&(this.scroller[d]=a),this.scroller[d]},this.rpos=function(a){var b,c=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];return b=a?this.pos(a*c):this.pos(),b/(c||1)},this.barOn=function(a){this.barOnCls&&(a||this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize]?l(this.root).removeClass(this.barOnCls):l(this.root).addClass(this.barOnCls))},this._pos0=function(a){n=this.cursor(a)-m},this.drag=function(a){this.scroller[this.origin.scroll]=i.call(this,this.cursor(a)-n)*(this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client])},this.selection=function(a){this.event(document,"selectpos selectstart",j,a?"off":"on")},this.resize=function(){function b(){var b,d;c.barOn(),d=c.scroller[c.origin.crossClient],b=c.scroller[c.origin.crossOffset]-d,a.freeze&&!c.clipper.style[c.origin.crossSize]&&l(c.clipper).css(c.origin.crossSize,c.clipper[c.origin.crossClient]-b+"px"),l(c.scroller).css(c.origin.crossSize,c.clipper[c.origin.crossClient]+b+"px"),Array.prototype.unshift.call(arguments,"resize"),h.apply(c,arguments),u=(new Date).getTime()}var c=this,d=0;(new Date).getTime()-u<s&&(clearTimeout(p),d=s),d?p=setTimeout(b,d):b()},this.updatePositions=function(){var a,b=this;b.bar&&(a=(o[b.origin.client]-b.barTopLimit)*b.scroller[b.origin.client]/b.scroller[b.origin.scrollSize],parseInt(v,10)!=parseInt(a,10)&&(d.call(b,a),v=a),m=g.call(b,b.rpos()),e.call(b,m)),Array.prototype.unshift.call(arguments,"scroll"),h.apply(b,arguments),t=(new Date).getTime()},this.scroll=function(){var a=0,c=this;(new Date).getTime()-t<s&&(clearTimeout(q),a=s),(new Date).getTime()-t<s&&(clearTimeout(q),a=s),a?q=setTimeout(function(){c.updatePositions()},a):c.updatePositions(),c.scrollingCls&&(r||this.$(this.scroller).addClass(this.scrollingCls),clearTimeout(r),r=setTimeout(function(){c.$(c.scroller).removeClass(c.scrollingCls),r=b},300))},this},update:function(a){return h.call(this,"upd",a),this.resize(1),this.updatePositions(),this},dispose:function(a){c(this,this.event,"off"),d(this.root,a.direction,"off"),$(this.scroller).css(this.origin.crossSize,""),this.barOn(!0),h.call(this,"dispose")},on:function(a,b,c){for(var d=a.split(" "),e=0;e<d.length;e++)"init"==d[e]?b.call(this,c):(this.events[d[e]]=this.events[d[e]]||[],this.events[d[e]].push(function(a){b.call(this,a||c)}))}},m.fn.constructor.prototype=m.fn,n.prototype.constructor.prototype=n.prototype,m.noConflict=function(){return a.baron=i,m},m.version="0.7.7",a.$&&$.fn&&($.fn.baron=m),a.baron=m,a.module&&module.exports&&(module.exports=m.noConflict())}}(window),function(a,b){var c=function(a){function c(a,c,d){var e=1==d?"pos":"oppos";g<(h.minView||0)&&(c=b),this.$(f[a]).css(this.origin.pos,"").css(this.origin.oppos,"").removeClass(h.outside),c!==b&&(c+="px",this.$(f[a]).css(this.origin[e],c).addClass(h.outside))}function d(a){try{i=document.createEvent("WheelEvent"),i.initWebKitWheelEvent(a.originalEvent.wheelDeltaX,a.originalEvent.wheelDeltaY),m.dispatchEvent(i),a.preventDefault()}catch(a){}}function e(a){var b;for(var c in a)h[c]=a[c];if(f=this.$(h.elements,this.scroller)){g=this.scroller[this.origin.client];for(var e=0;e<f.length;e++)b={},b[this.origin.size]=f[e][this.origin.offset],f[e].parentNode!==this.scroller&&this.$(f[e].parentNode).css(b),b={},b[this.origin.crossSize]=f[e].parentNode[this.origin.crossClient],this.$(f[e]).css(b),g-=f[e][this.origin.offset],l[e]=f[e].parentNode[this.origin.offsetPos],j[e]=j[e-1]||0,k[e]=k[e-1]||Math.min(l[e],0),f[e-1]&&(j[e]+=f[e-1][this.origin.offset],k[e]+=f[e-1][this.origin.offset]),(0!=e||0!=l[e])&&(this.event(f[e],"mousewheel",d,"off"),this.event(f[e],"mousewheel",d));h.limiter&&f[0]&&(this.track&&this.track!=this.scroller?(b={},b[this.origin.pos]=f[0].parentNode[this.origin.offset],this.$(this.track).css(b)):this.barTopLimit=f[0].parentNode[this.origin.offset],this.scroll()),h.limiter===!1&&(this.barTopLimit=0)}var i={element:f,handler:function(){for(var a,b=o(this)[0].parentNode,c=b.offsetTop,d=0;d<f.length;d++)f[d]===this&&(a=d);var e=c-j[a];h.scroll?h.scroll({x1:p.scroller.scrollTop,x2:e}):p.scroller.scrollTop=e},type:"click"};h.clickable&&(this._eventHandlers.push(i),n(i.element,i.type,i.handler,"on"))}var f,g,h={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},j=[],k=[],l=[],m=this.scroller,n=this.event,o=this.$,p=this;this.on("init",e,a);var q=[],r=[];this.on("init scroll",function(){var a,d,e;if(f){for(var i,m=0;m<f.length;m++)a=0,l[m]-this.pos()<k[m]+h.radius?(a=1,d=j[m]):l[m]-this.pos()>k[m]+g-h.radius?(a=2,d=this.scroller[this.origin.client]-f[m][this.origin.offset]-j[m]-g):(a=3,d=b),e=!1,(l[m]-this.pos()<k[m]||l[m]-this.pos()>k[m]+g)&&(e=!0),(a!=q[m]||e!=r[m])&&(c.call(this,m,d,a),q[m]=a,r[m]=e,i=!0);if(i)for(m=0;m<f.length;m++)1==q[m]&&h.past&&this.$(f[m]).addClass(h.past).removeClass(h.future),2==q[m]&&h.future&&this.$(f[m]).addClass(h.future).removeClass(h.past),3==q[m]?((h.future||h.past)&&this.$(f[m]).removeClass(h.past).removeClass(h.future),h.inside&&this.$(f[m]).addClass(h.inside)):h.inside&&this.$(f[m]).removeClass(h.inside),q[m]!=q[m+1]&&1==q[m]&&h.before?this.$(f[m]).addClass(h.before).removeClass(h.after):q[m]!=q[m-1]&&2==q[m]&&h.after?this.$(f[m]).addClass(h.after).removeClass(h.before):this.$(f[m]).removeClass(h.before).removeClass(h.after),h.grad&&(r[m]?this.$(f[m]).addClass(h.grad):this.$(f[m]).removeClass(h.grad))}}),this.on("resize upd",function(a){e.call(this,a&&a.fix)})};baron.fn.fix=function(a){for(var b=0;this[b];)c.call(this[b],a),b++;return this}}(window),function(){var a=function(a){var b,c,d,e,f,g=this;e=a.screen||.9,a.forward&&(b=this.$(a.forward,this.clipper),f={element:b,handler:function(){var b=g.pos()-a.delta||30;g.pos(b)},type:"click"},this._eventHandlers.push(f),this.event(f.element,f.type,f.handler,"on")),a.backward&&(c=this.$(a.backward,this.clipper),f={element:c,handler:function(){var b=g.pos()+a.delta||30;g.pos(b)},type:"click"},this._eventHandlers.push(f),this.event(f.element,f.type,f.handler,"on")),a.track&&(d=a.track===!0?this.track:this.$(a.track,this.clipper)[0],d&&(f={element:d,handler:function(a){var b=a["offset"+g.origin.x],c=g.bar[g.origin.offsetPos],d=0;c>b?d=-1:b>c+g.bar[g.origin.offset]&&(d=1);var f=g.pos()+d*e*g.scroller[g.origin.client];g.pos(f)},type:"mousedown"},this._eventHandlers.push(f),this.event(f.element,f.type,f.handler,"on")))};baron.fn.controls=function(b){for(var c=0;this[c];)a.call(this[c],b),c++;return this}}(window),function(){var a=function(a){function b(){return r.scroller[r.origin.scroll]+r.scroller[r.origin.offset]}function c(){return r.scroller[r.origin.scrollSize]}function d(){return r.scroller[r.origin.client]}function e(a,b){var c=5e-4*a;return Math.floor(b-c*(a+550))}function f(a){k=a,a?(g(),h=setInterval(g,200)):clearInterval(h)}function g(){var g,h,k={},w=b(),x=c(),y=1==s;if(h=0,s>0&&(h=40),g=e(u,h),w>=x-u&&s>-1?y&&(u+=g):u=0,0>u&&(u=0),k[m]=u+"px",d()<=c()){r.$(l).css(k);for(var z=0;z<p.length;z++)r.$(p[z].self).css(p[z].property,Math.min(u/n*100,100)+"%")}q&&u&&r.$(r.root).addClass(q),0==u&&a.onCollapse&&a.onCollapse(),s=0,i=setTimeout(function(){s=-1},v),o&&u>n&&!j&&(o(),j=!0),0==u?t++:t=0,t>1&&(f(!1),j=!1,q&&r.$(r.root).removeClass(q))}var h,i,j,k,l=this.$(a.block),m=a.size||this.origin.size,n=a.limit||80,o=a.onExpand,p=a.elements||[],q=a.inProgress||"",r=this,s=0,t=0,u=0,v=a.waiting||500;this.on("init",function(){f(!0)}),this.on("dispose",function(){f(!1)}),this.event(this.scroller,"mousewheel DOMMouseScroll",function(a){var d=a.wheelDelta<0||a.originalEvent&&a.originalEvent.wheelDelta<0||a.detail>0;d&&(s=1,clearTimeout(i),!k&&b()>=c()&&f(!0))})};baron.fn.pull=function(b){for(var c=0;this[c];)a.call(this[c],b),c++;return this}}(window),function(a){var b=a.MutationObserver||a.WebKitMutationObserver||a.MozMutationObserver||null,c=function(){var a=this;this._observer=new b(function(){a.update()}),this.on("init",function(){a._observer.observe(a.root,{childList:!0,subtree:!0,characterData:!0})}),this.on("dispose",function(){a._observer.disconnect(),delete a._observer})};baron.fn.autoUpdate=function(a){if(!b)return this;for(var d=0;this[d];)c.call(this[d],a),d++;return this}}(window),function(a,b){"$:nomunge";var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),RichMarker.prototype=new google.maps.OverlayView,window.RichMarker=RichMarker,RichMarker.prototype.getVisible=function(){return this.get("visible")},RichMarker.prototype.getVisible=RichMarker.prototype.getVisible,RichMarker.prototype.setVisible=function(a){this.set("visible",a)},RichMarker.prototype.setVisible=RichMarker.prototype.setVisible,RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed,RichMarker.prototype.setFlat=function(a){this.set("flat",!!a)},RichMarker.prototype.setFlat=RichMarker.prototype.setFlat,RichMarker.prototype.getFlat=function(){return this.get("flat")},RichMarker.prototype.getFlat=RichMarker.prototype.getFlat,RichMarker.prototype.getWidth=function(){return this.get("width")},RichMarker.prototype.getWidth=RichMarker.prototype.getWidth,RichMarker.prototype.getHeight=function(){return this.get("height")},RichMarker.prototype.getHeight=RichMarker.prototype.getHeight,RichMarker.prototype.setShadow=function(a){this.set("shadow",a),this.flat_changed()},RichMarker.prototype.setShadow=RichMarker.prototype.setShadow,RichMarker.prototype.getShadow=function(){return this.get("shadow")},RichMarker.prototype.getShadow=RichMarker.prototype.getShadow,RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed,RichMarker.prototype.setZIndex=function(a){this.set("zIndex",a)},RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex,RichMarker.prototype.getZIndex=function(){return this.get("zIndex")},RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex,RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed,RichMarker.prototype.getDraggable=function(){return this.get("draggable")},RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable,RichMarker.prototype.setDraggable=function(a){this.set("draggable",!!a)},RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable,RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed,RichMarker.prototype.getPosition=function(){return this.get("position")},RichMarker.prototype.getPosition=RichMarker.prototype.getPosition,RichMarker.prototype.setPosition=function(a){this.set("position",a)},RichMarker.prototype.setPosition=RichMarker.prototype.setPosition,RichMarker.prototype.position_changed=function(){this.draw()},RichMarker.prototype.position_changed=RichMarker.prototype.position_changed,RichMarker.prototype.getAnchor=function(){return this.get("anchor")},RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor,RichMarker.prototype.setAnchor=function(a){this.set("anchor",a)},RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor,RichMarker.prototype.anchor_changed=function(){this.draw()},RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed,RichMarker.prototype.htmlToDocumentFragment_=function(a){var b=document.createElement("DIV");if(b.innerHTML=a,1==b.childNodes.length)return b.removeChild(b.firstChild);for(var c=document.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);return c},RichMarker.prototype.removeChildren_=function(a){if(a)for(var b;b=a.firstChild;)a.removeChild(b)},RichMarker.prototype.setContent=function(a){this.set("content",a)},RichMarker.prototype.setContent=RichMarker.prototype.setContent,RichMarker.prototype.getContent=function(){return this.get("content")},RichMarker.prototype.getContent=RichMarker.prototype.getContent,RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var a=this.getContent();if(a){"string"==typeof a&&(a=a.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),a=this.htmlToDocumentFragment_(a)),this.markerContent_.appendChild(a);for(var b,c=this,d=this.markerContent_.getElementsByTagName("IMG"),e=0;b=d[e];e++)google.maps.event.addDomListener(b,"mousedown",function(a){c.getDraggable()&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1)}),google.maps.event.addDomListener(b,"load",function(){c.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},RichMarker.prototype.content_changed=RichMarker.prototype.content_changed,RichMarker.prototype.setCursor_=function(a){if(this.ready_){var b="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==a&&(b="-moz-grabbing"),"dragready"==a&&(b="-moz-grab"),"draggable"==a&&(b="pointer")):(("dragging"==a||"dragready"==a)&&(b="move"),"draggable"==a&&(b="pointer")),this.markerWrapper_.style.cursor!=b&&(this.markerWrapper_.style.cursor=b)}},RichMarker.prototype.startDrag=function(a){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var b=this.getMap();this.mapDraggable_=b.get("draggable"),b.set("draggable",!1),this.mouseX_=a.clientX,this.mouseY_=a.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},RichMarker.prototype.drag=function(a){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var b=this.mouseX_-a.clientX,c=this.mouseY_-a.clientY;this.mouseX_=a.clientX,this.mouseY_=a.clientY;var d=parseInt(this.markerWrapper_.style.left,10)-b,e=parseInt(this.markerWrapper_.style.top,10)-c;this.markerWrapper_.style.left=d+"px",this.markerWrapper_.style.top=e+"px";var f=this.getOffset_(),g=new google.maps.Point(d-f.width,e-f.height),h=this.getProjection();this.setPosition(h.fromDivPixelToLatLng(g)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},RichMarker.prototype.addDragging_=function(a){if(a){var b=this;this.draggableListener_=google.maps.event.addDomListener(a,"mousedown",function(a){b.startDrag(a)}),this.setCursor_("draggable")}},RichMarker.prototype.addDraggingListeners_=function(){var a=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(b){a.drag(b)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){a.stopDrag(),a.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(b){a.drag(b)},!0),google.maps.event.addDomListener(window,"mouseup",function(){a.stopDrag()},!0)]},RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var a,b=0;a=this.draggingListeners_[b];b++)google.maps.event.removeListener(a);this.draggingListeners_.length=0}},RichMarker.prototype.getOffset_=function(){var a=this.getAnchor();if("object"==typeof a)return a;var b=new google.maps.Size(0,0);if(!this.markerContent_)return b;var c=this.markerContent_.offsetWidth,d=this.markerContent_.offsetHeight;switch(a){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:b.width=-c/2;break;case RichMarkerPosition.TOP_RIGHT:b.width=-c;break;case RichMarkerPosition.LEFT:b.height=-d/2;break;case RichMarkerPosition.MIDDLE:b.width=-c/2,b.height=-d/2;break;case RichMarkerPosition.RIGHT:b.width=-c,b.height=-d/2;break;case RichMarkerPosition.BOTTOM_LEFT:b.height=-d;break;case RichMarkerPosition.BOTTOM:b.width=-c/2,b.height=-d;break;case RichMarkerPosition.BOTTOM_RIGHT:b.width=-c,b.height=-d}return b},RichMarker.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var a=this;google.maps.event.addDomListener(this.markerContent_,"click",function(){google.maps.event.trigger(a,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(){google.maps.event.trigger(a,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(){google.maps.event.trigger(a,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var b=this.getPanes();b&&b.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},RichMarker.prototype.onAdd=RichMarker.prototype.onAdd,RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var a=this.getProjection();if(a){var b=this.get("position"),c=a.fromLatLngToDivPixel(b),d=this.getOffset_();this.markerWrapper_.style.top=c.y+d.height+"px",this.markerWrapper_.style.left=c.x+d.width+"px";var e=this.markerContent_.offsetHeight,f=this.markerContent_.offsetWidth;f!=this.get("width")&&this.set("width",f),e!=this.get("height")&&this.set("height",e)}}},RichMarker.prototype.draw=RichMarker.prototype.draw,RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition;